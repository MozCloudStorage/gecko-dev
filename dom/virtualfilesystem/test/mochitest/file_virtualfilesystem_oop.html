
<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <title>Test for FileSystemProvider API at receiver side (OOP)</title>
</head>
<body>
<div id="content"></div>
<script type="application/javascript;version=1.7">

"use strict";

function is(a, b, msg) {
  alert((a === b ? 'OK ' : 'KO ') + msg);
}

function ok(a, msg) {
  alert((a ? 'OK ' : 'KO ') + msg);
}

function info(msg) {
  alert('INFO ' + msg);
}

function command(msg) {
  alert('COMMAND ' + JSON.stringify(msg));
}

function finish() {
  alert('DONE');
}

var _fileSystemId = "dummyId";
var _displayName = "dummyFileSystem";
var _writable = true;
var _openedFilesLimit = 10;

function testMount() {
  return new Promise(function(aResolve, aReject) {
     ok(navigator.fileSystemProvider, "should have navigator.fileSystemProvider");
     navigator.fileSystemProvider.mount({fileSystemId: _fileSystemId,
                                         displayName: _displayName,
                                         writable: _writable,
                                         openedFilesLimit: _openedFilesLimit}).then(
      function() {
        ok(true, "mount ok.");
        aResolve();
      },
      function(aError) {
        ok(false, "Fail to mount: " + aError);
        aResolve();
      }
    );
  });
}

testMount().
then(finish);

</script>
</body>
</html>
